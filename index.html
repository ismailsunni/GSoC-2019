<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
    <title>GSoC 2019 | Ismail Sunni</title>
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.1/build/pure-min.css" integrity="sha384-oAOxQR6DkCoMliIh8yFnu25d7Eq/PHS21PClpwjOTeU2jRSq11vu66rf90/cZr47" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Inconsolata&display=swap" rel="stylesheet" />
    <link href="static/css/main.css" rel="stylesheet"/>
  </head>
  <body>
    <div class="content">
      <div id="doc" class="markdown-body container-fluid comment-enabled" data-hard-breaks="true">
        <h1>
          Google Summer of Code 2019, with OSGeo (The Open Source Geospatial Fundation)
        </h1>
        <hr/>
        <h2>
          QGIS 3D Improvement: On Screen Navigation, Bookmarks, Rendering Point Feature as Billboard, and Measuring Tool
        </h2>
        <p class="size-2">
          <strong>Student:</strong> <a href="http://github.com/ismailsunni" target="_blank" rel="noopener">Ismail Sunni</a>
          <br/>
          <strong>Mentors:</strong> <a href="http://github.com/wonder-sk" target="_blank" rel="noopener">Martin Dobias</a>, <a href="https://github.com/PeterPetrik" target="_blank" rel="noopener">Peter Petrik</a>
        </p>
        <h3>Abstract</h3>
        <blockquote>
          <p class="need-check">
            QGIS 3D is a great feature that has been introduced in QGIS 3.0 in 2018. It is still missing some features that are needed or can be helpful for the user though. In this project, I will work on 4 improvements to fill that missing features:
          </p>
          <ol class="need-check">
            <li>
              On Screen Navigation: help the user to navigate the 3D view
            </li>
            <li>
              Measuring Tool: measure distance in 3D view
            </li>
            <li>
              Rendering Point Feature as Billboard: show a point feature as a billboard (use case: show icon location and point cloud rendering)
            </li>
            <li>
              Bookmarks: help the user to save a 3D view and/or go back to a saved 3D view
              </li>
          </ol>
        </blockquote>
        <p>
          <a href="https://storage.googleapis.com/summerofcode-prod.appspot.com/gsoc/core_project/doc/4641479446757376_1554708416_IsmailSunniProposalGSoC2019-QGIS3D-v02.pdf?Expires=1566805605&GoogleAccessId=summerofcode-prod%40appspot.gserviceaccount.com&Signature=IMrvL5XH9UUQGQQhhBcceNou9j%2FCm6BrJLeWx3XVPmxLTdXp8uExt%2FFGEGomd8a0TVEx%2FEdX5zJp7H5QjvqMWzfJnIhup76p%2BMc2GzUchJ1Y6roxCu3tWe3ScakYCxX6fg2151opInlmUbrwL18cktLVhBrMN1n4JdcgSgQmq0b8ZtgqaF1hVF%2B%2FQKhsPT8YyWdG%2BO89YchZ6XvV1zLK9PHbV357UPo0Qh5h4Wdi6DV19DCoOyswKmRHIDNasu%2BQuFpTfPUWNWjcEaXV5Y5Y9ZE7yrAwqpCnHsMxKfjwmGRg7jQjedmM%2BgRZyYnLDqd4riNG7AP8H1osDLuGB4VUuA%3D%3D" target="_blank" rel="noopener" >
            Read Full Proposal
          </a>
        </p>
        <h3>Important Links</h3>
        <ol>
          <li>
            <a href="https://github.com/ismailsunni/QGIS/wiki/GSoC-2019---QGIS-3D-Improvement" target="_blank" rel="noopener">
              Project Wiki and Weekly Report
            </a>
          </li>
          <li>
            <a href="https://github.com/ismailsunni/qgis" target="_blank" rel="noopener">
              My fork of QGIS repository
            </a>
          </li>
          <li>
            <a href="https://github.com/ismailsunni/qt3d-hello-world" target="_blank" rel="noopener">
              Learning Qt3D - Navigation
            </a>
          </li>
          <li>
            <a href="https://github.com/ismailsunni/qt3d-custom-shader" target="_blank" rel="noopener">
              Learning Qt3D with Custom Shader
            </a>
          </li>
          <li>
            <a href="https://ismailsunni.github.io/GSoC-2019/" target="_blank" rel="noopener">
              This final GSoC Report
            </a>
          </li>
        </ol>
        <hr/>
        <h2>Before GSoC 2019</h2>
        <ol>
          <li>
            It's possible to navigate in 3D Map View by using mouse or keyboard. It's quite easy to do it, unless you are not familiar about it. Just like me. It's easy to get lost and confused. You are not sure which key or movement to zoom, tilt, pan, or rotate the map view.
          </li>
          <li>
            There is no way to do measurement in 3D Map view.
          </li>
          <li>
            There is no billboard rendering support for point in 3D.
          </li>
          <li>
            There is no bookmark feature to save a specific scene in 3D map view. There is only reset view which set the view from the top.
          </li>
        </ol>
        <hr/>
        <h2>My Summer (and before) Story with GSoC?</h2>
        <p class="unfinished">
          All is started in Febuary, I was thinking to apply for GSoC 2019. I approach some of QGIS core developers, and things went to QGIS 3D. I attended QGIS Hackfest in A Coruna, Spain to discuss more about my proposal with my future mentor, Martin Dobias. We came up with some features that I can work in the GSoC project.
        </p>
        <h3>3D On-Screen Navigation</h3>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/jp197BEymks" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <p>
          Martin suggested me to start working on a separate project to make the iteration faster. I worked initially in <a href="https://github.com/ismailsunni/qt3d-hello-world" target="_blank" rel="noopener">this repository</a> to implement on-screen navigation. Things went well, except that it's not possible to create a floating widget on top of Q3DWindow. The alternative implementation is adding the QWidget for the navigation next to the 3D Map View. Other alternative solution is either too much work (render the navigation manually) or adding new dependency into QGIS (using QtQuick). The tool is accessible from the 3D Map View toolbar.
        </p>
        <span>
          <strong>
              Result:
          </strong>
          On-Screen navigation is added with these features: zoom in and out, pan, rotate with a compas-like widget, tilt up and down.
        </span>

        <h3>3D Measurement Tool</h3>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/gW0xu595HKA" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <p>
          The first obstacle is the line rendering (it does not show up, and I learned that it is not so easy to debug missing thing in 3D). I got help for this one in <a href="https://github.com/qgis/QGIS/pull/30299/commits/8550f2c922d3dc566401014d5b23fadfda2dd30f" target="_blank" rel="noopener">this commit</a>.
        </p>
        <p>
          I tried implementing the 3D measurement tool as in 2D as much as possible. It has the same UI with the same configuration (rubber band color, unit, decimal place, and keeping the base unit). It also has the same behavior (left-click to add a new point, middle-click to delete the last point, and right-click to restart the measurement). The main difference compared to the 2D one is this tool considers the Z-value, for example, it will pick the height of an object or the wall of a building. In this case, the user can measure for example the height of a tree or the distance between the top of two building. The tool is available in the 3D Map view toolbar.
        </p>
        <h3>3D Rendering Point Feature as A Billboard</h3>
        <iframe width="560" height="315" src="https://www.youtube.com/embed/_iCPqcXWxk0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        <p class="unfinished">
          Something here
        </p>
        <h3>3D Bookmark View</h3>
        <p>
          Unfortunately, I couldn't manage to work on this feature in the GSoC period. The billboard rendering feature took more time than I expected.
        </p>
        <h2 id="Future-Plans">Future Plans</h2>
        <p class="unfinished">
          Something here
        </p>
        <hr/>
        <h2 id="Credits">Credits</h2>
        <p class="unfinished">
          Something here
        </p>
        <hr/>
        <h2 id="Apologies">Apologies</h2>
        <p class="unfinished">
          Something here
        </p>
        <hr/>
        <h2 id="List-of-merged-PRs">List of merged PRs</h2>
        <p>
          Here is a list of all the PRs made by me which got merged during the
          application process and the summer.
        </p>
        <ul>
          <li>
            <a href="https://github.com/qgis/QGIS/pull/30105" target="_blank" rel="noopener">
              [3D] On screen navigation
            </a>
          </li>
          <li>
            <a href="https://github.com/qgis/QGIS/pull/30299" target="_blank" rel="noopener">
              [3D] Measurement tool
            </a>
          </li>
          <li>
            <a href="https://github.com/qgis/QGIS/pull/30588" target="_blank" rel="noopener">
              Bug fix: Always enable 3d model material for non 3D model shape.
            </a>
          </li>
          <li>
            <a href="https://github.com/qgis/QGIS/pull/31388" target="_blank" rel="noopener">
              Bug fix: Set ambient to not transparent for measurement line.
            </a>
          </li>
          <li>
            <a href="https://github.com/qgis/QGIS/pull/31308" target="_blank" rel="noopener">
              [3D] Billboard Rendering for Point 3D
            </a>
          </li>
        </ul>
        <hr/>
        <p>
          Contact me at
          <a href="mailto:imajimatika@gmail.com" target="_blank" rel="noopener">imajimatika@gmail.com</a>
          if you have any queries regarding GSoC, QGIS 3D (and QGIS itself), or want to share some food.
        </p>
      </div>
    </div>
  </body>
</html>